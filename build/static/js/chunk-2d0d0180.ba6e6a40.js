(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d0180"],{6709:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"main"},[a("div",{staticClass:"top"},[a("div",{staticClass:"top-title "},[t._v("数据筛选")]),a("div",{staticClass:"top-content flex fvertical fbetween"},[a("div",{staticClass:"top-content-item flex fvertical"},[a("div",{staticClass:"flex fvertical top-content-item-status"},[a("span",[t._v("输入查询：")]),a("el-input",{staticClass:"top-content-item-input",attrs:{placeholder:"ID/项目名称"},model:{value:t.creator,callback:function(e){t.creator=e},expression:"creator"}})],1),a("div",{staticClass:"flex fvertical top-content-item-status"},[a("span",[t._v("跟进人：")]),a("el-select",{attrs:{placeholder:"选择跟进人"},model:{value:t.updator,callback:function(e){t.updator=e},expression:"updator"}},t._l(t.options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1)]),a("div",{staticClass:"top-content-btn"},[a("el-button",{attrs:{type:"primary"}},[t._v("查询")]),a("el-button",[t._v("重置")])],1)])]),a("div",{staticClass:"box"},[a("div",{staticClass:"box-top flex fbetween fvertical"},[a("div",{staticClass:"bold"},[t._v("数据列表")]),a("el-button",[t._v("导出")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:"",border:""}},[a("el-table-column",{attrs:{prop:"date",label:"序号",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.pageSzie*(t.pageIndex-1)+1+e.$index)+" ")]}}])}),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"200"}}),a("el-table-column",{attrs:{prop:"createName",label:"名称"}}),a("el-table-column",{attrs:{prop:"phone",label:"手机号码"}}),a("el-table-column",{attrs:{label:"语音"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.voices,(function(e,n){return[0==n?a("m-audio",{key:n,staticClass:"demand-deltails-box-item-mp3",attrs:{src:e,text:"点这里播放"}}):t._e()]}))]}}])}),a("el-table-column",{attrs:{prop:"content",label:"需求"}}),a("el-table-column",{attrs:{prop:"address",label:"服务单"}}),a("el-table-column",{attrs:{prop:"updateName",label:"操作人"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"操作时间"}}),a("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(1==e.row.status?"正常":"已取消")+" ")]}}])}),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleLook(e.row)}}},[t._v("查看")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleSumbitRelationship(e.row)}}},[t._v("确认联系 ")]),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.handleCreate(e.row)}}},[t._v("创建服务单")]),a("el-button",{attrs:{type:"text",size:"small"}},[t._v("取消")])]}}])})],1),a("div",{staticClass:"flex fcenter page"},[a("el-pagination",{staticClass:"page",attrs:{id:"page",background:"","current-page":t.pageIndex,"page-sizes":[10,20,30,40],"page-size":t.pageSzie,layout:"total, prev, pager, next,sizes, jumper",total:t.PageCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])},l=[],o=a("1da1"),r=(a("96cf"),a("c24f")),s={data:function(){return{tableData:[],pageIndex:1,pageSzie:10,PageCount:0,serach:"",value:"",options:[],creator:"",updator:"",loading:!1}},mounted:function(){this.getBriel()},methods:{handleLook:function(){console.log("执行111")},handleSizeChange:function(t){this.pageSzie=t,this.pageIndex=1,this.getBriel()},handleCurrentChange:function(t){this.pageIndex=t,this.getBriel()},handleCreate:function(t){console.log(t),this.$router.push({path:"/order/demand-details",query:{id:t.id}})},handleSumbitRelationship:function(t){var e=this;this.$confirm("是否修改成已联系状态?","确认提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.UpdateBriel(t)})).catch((function(){}))},UpdateBriel:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return n={},n.id=t.id,n.contactStatus=t.contactStatus,n.status=t.status,e.loading=!0,a.prev=5,a.next=8,Object(r["a"])(n);case 8:l=a.sent,console.log(l),e.loading=!1,e.$message.success("操作成功"),e.getBriel(),a.next=19;break;case 15:a.prev=15,a.t0=a["catch"](5),e.loading=!1,console.log(a.t0);case 19:case"end":return a.stop()}}),a,null,[[5,15]])})))()},getBriel:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a={},a.pageIndex=t.pageIndex,a.pageSzie=t.pageSzie,a.creator=t.creator,a.updator=t.updator,t.loading=!0,e.prev=6,e.next=9,Object(r["b"])(a);case 9:n=e.sent,console.log("获取企业服务单::",n),t.tableData=n.data.records,t.PageCount=n.data.total,t.loading=!1,e.next=19;break;case 16:e.prev=16,e.t0=e["catch"](6),t.loading=!1;case 19:case"end":return e.stop()}}),e,null,[[6,16]])})))()}}},i=s,c=a("2877"),u=Object(c["a"])(i,n,l,!1,null,null,null);e["default"]=u.exports}}]);