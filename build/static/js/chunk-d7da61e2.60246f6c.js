(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7da61e2"],{2722:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-radio-group",{staticStyle:{"margin-bottom":"30px"},model:{value:e.tabPosition,callback:function(t){e.tabPosition=t},expression:"tabPosition"}},[a("el-radio-button",{attrs:{label:"top"}},[e._v("需求单详情")]),a("el-radio-button",{attrs:{label:"right"}},[e._v("服务单")])],1),a("div",{staticClass:"box"},["top"==e.tabPosition?a("div",{staticClass:"demand-deltails"},[a("div",{staticClass:"box-demand-title"},[e._v("需求单信息")]),a("div",{staticClass:"demand-deltails-box"},[e._m(0),e._m(1),e._m(2),a("div",{staticClass:"demand-deltails-box-item flex"},[a("div",{staticClass:"demand-deltails-box-item-title"},[e._v("语音")]),a("div",{staticClass:"demand-deltails-box-item-conter"},e._l(3,(function(e,t){return a("m-audio",{staticClass:"demand-deltails-box-item-mp3",attrs:{src:"",text:"点这里播放"}})})),1)]),e._m(3),a("div",{staticClass:"demand-deltails-box-item flex"},[a("div",{staticClass:"demand-deltails-box-item-title"},[e._v("关联服务单")]),a("div",{staticClass:"demand-deltails-box-item-conter"},[a("el-button",{attrs:{type:"text"}},[e._v("查看详情")])],1)])])]):a("div",{staticClass:"demand-service"},[a("div",{staticClass:"box-demand-title"},[e._v("项目信息")]),a("div",{staticClass:"demand-service-info"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.basicForm,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"项目名称"}},[a("el-input",{model:{value:e.basicForm.title,callback:function(t){e.$set(e.basicForm,"title",t)},expression:"basicForm.title"}})],1),a("div",{staticClass:"flex  "},[a("el-form-item",{attrs:{label:"项目开始时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.basicForm.startTime,callback:function(t){e.$set(e.basicForm,"startTime",t)},expression:"basicForm.startTime"}})],1),a("el-form-item",{staticClass:"demand-service-end-item",attrs:{label:"项目竣工时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.basicForm.endTime,callback:function(t){e.$set(e.basicForm,"endTime",t)},expression:"basicForm.endTime"}})],1)],1),a("el-form-item",{attrs:{label:"项目工期"}},[a("el-input",{attrs:{disabled:!0,value:e.basicForm.duration}})],1),a("el-form-item",{attrs:{label:"项目介绍"}},[a("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.basicForm.description,callback:function(t){e.$set(e.basicForm,"description",t)},expression:"basicForm.description"}}),a("div",{staticClass:"demand-service-upload"},[a("el-upload",{staticClass:"avatar-uploader flex",attrs:{action:"/api/file/admin/v1/upload/public","list-type":"picture-card",name:"multipartFile","on-remove":e.handleRemoveImg,"on-preview":e.handlePictureCardPreview,"on-exceed":e.handleExceed,"on-success":e.handleSuccessImg,limit:4,"before-upload":e.beforeAvatarUpload}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),a("el-dialog",{attrs:{visible:e.isImges},on:{"update:visible":function(t){e.isImges=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1)],1),a("el-form-item",{attrs:{label:"项目地址"}},[e.allAddress.city?e._e():a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.isAddress=!0}}},[e._v("添加 ")]),e.allAddress.city?a("div",{staticClass:"demand-service-address"},[a("div",{staticClass:"flex fvertical fbetween"},[a("p",[e._v(e._s(e.allAddress.address?e.allAddress.address:e.allAddress.city)+e._s(e.allAddress.title))]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.isAddress=!0}}},[e._v("修改 ")])],1),a("div",{staticStyle:{width:"100%",height:"300px","margin-top":"20px"},attrs:{id:"DetailsAddress"}})]):e._e()],1),a("el-form-item",{attrs:{label:"打卡范围"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.basicForm.scope,callback:function(t){e.$set(e.basicForm,"scope",t)},expression:"basicForm.scope"}},e._l(e.scopeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),a("div",{staticClass:"demand-service-plan"},[a("div",{staticClass:"box-demand-title flex fvertical"},[a("span",[e._v("方案信息")]),a("el-radio-group",{staticClass:"demand-service-plan-gropu",model:{value:e.scheme,callback:function(t){e.scheme=t},expression:"scheme"}},[e._l(e.schemeList,(function(t,s){return[a("el-radio-button",{attrs:{label:t.label}},[e._v(e._s(t.name))])]}))],2),e.schemeList.length<3?a("div",{staticClass:"demand-service-plan-add",on:{click:e.handleAddPlan}},[a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]):e._e()],1),e._l(e.schemes,(function(t,s){return a("div",{key:s,staticClass:"demand-service-plan-box"},[a("div",{staticClass:"demand-service-plan-box-title flex fbetween"},[a("span",{staticClass:"box-demand-title"},[e._v("方案一：")]),0!=s?a("div",{staticClass:"demand-service-plan-box-del "},[a("i",{staticClass:"el-icon-delete"}),a("span",[e._v("删除方案")])]):e._e()]),a("el-form",{ref:"ruleForm",refInFor:!0,attrs:{model:t,"label-width":"100px"}},[a("div",{staticClass:"flex demand-service-plan-box-item"},[a("el-form-item",{attrs:{label:"方案标签"}},[a("el-input",{model:{value:t.tag,callback:function(a){e.$set(t,"tag",a)},expression:"item.tag"}})],1),a("el-form-item",{attrs:{label:"简介"}},[a("el-input",{model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"item.description"}})],1)],1),a("div",{staticClass:"flex demand-service-plan-box-item"},[a("el-form-item",{attrs:{label:"换人次数"}},[a("div",{staticClass:"flex"},[a("el-input",{staticClass:"f1",model:{value:t.replaceTimes,callback:function(a){e.$set(t,"replaceTimes",a)},expression:"item.replaceTimes"}}),a("el-input",{staticClass:"demand-service-plan-box-item-second",attrs:{disabled:!0,value:"次"}})],1)]),a("el-form-item",{attrs:{label:"方案总工程量"}},[a("el-input",{model:{value:t.totalUnit,callback:function(a){e.$set(t,"totalUnit",a)},expression:"item.totalUnit"}})],1)],1)]),e._l(t.teams,(function(t,i){return a("div",{key:i,staticClass:"demand-service-plan-main"},[a("div",{staticClass:"demand-service-plan-box-info"},[a("el-form",{attrs:{model:t,"label-width":"120px"}},[a("div",{staticClass:"flex demand-service-plan-box-info-data"},[a("el-form-item",{attrs:{label:"班组名称"}},[a("el-input",{model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"teams.name"}})],1),a("el-form-item",{attrs:{label:"进场时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.enterStartTime,callback:function(a){e.$set(t,"enterStartTime",a)},expression:"teams.enterStartTime"}})],1),a("el-form-item",{attrs:{label:"班组工期"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.enterDay,callback:function(a){e.$set(t,"enterDay",a)},expression:"teams.enterDay"}})],1)],1),a("div",{staticClass:"flex  demand-service-plan-box-info-data"},[a("el-form-item",{attrs:{label:"退场时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:t.enterEndTime,callback:function(a){e.$set(t,"enterEndTime",a)},expression:"teams.enterEndTime"}})],1),a("el-form-item",{attrs:{label:"班组工程量"}},[a("div",{staticClass:"flex"},[a("el-input",{staticClass:"f1",attrs:{disabled:!0},model:{value:t.totalQuantity,callback:function(a){e.$set(t,"totalQuantity",a)},expression:"teams.totalQuantity"}}),a("el-select",{staticStyle:{width:"120px","margin-left":"10px"},attrs:{placeholder:"请选择"},model:{value:t.unit,callback:function(a){e.$set(t,"unit",a)},expression:"teams.unit"}},e._l(e.companyList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)]),a("el-form-item",{attrs:{label:"计件单价"}},[a("div",{staticClass:"flex"},[a("el-input",{staticClass:"f1",model:{value:t.unitPrice,callback:function(a){e.$set(t,"unitPrice",a)},expression:"teams.unitPrice"}}),a("span",[e._v("元/"+e._s(e.geUnit(t.unit)))])],1)])],1),a("div",{staticClass:"flex  demand-service-plan-box-info-data"},[a("el-form-item",{attrs:{label:"上班时间"}},[a("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},on:{change:function(a){return e.handleWorkTime(s,i,t)}},model:{value:t.workTimeList,callback:function(a){e.$set(t,"workTimeList",a)},expression:"teams.workTimeList"}})],1),a("el-form-item",{attrs:{label:"午休时间"}},[a("el-time-picker",{attrs:{"is-range":"","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},on:{change:function(a){return e.handleRestTime(s,i,t)}},model:{value:t.restTimeList,callback:function(a){e.$set(t,"restTimeList",a)},expression:"teams.restTimeList"}})],1)],1)])],1),a("div",{staticClass:"demand-service-plan-box-list"},[e._l(t.teamTypes,(function(l,n){return a("div",{staticClass:"demand-service-plan-box-list-item"},[a("el-form",{ref:"ruleForm",refInFor:!0,attrs:{model:l,"label-width":"100px"}},[a("div",{staticClass:"flex fbetween"},[a("div",{staticClass:"demand-service-plan-box-list-item-box flex fvertical"},[a("div",{staticClass:"plan-box-btn"},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("删除")])],1),a("el-form-item",{attrs:{label:"工种"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:l.name,callback:function(t){e.$set(l,"name",t)},expression:"teamTypes.name"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("div",{staticClass:"demand-service-plan-box-list-item-box"},[a("el-form-item",{attrs:{label:"工种标签"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.handleTag(s,i,n,l)}},model:{value:l.tag,callback:function(t){e.$set(l,"tag",t)},expression:"teamTypes.tag"}},e._l(e.tagList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})),1)],1)],1),a("div",{staticClass:"demand-service-plan-box-list-item-box"},[a("el-form-item",{attrs:{label:"工种模式"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:l.workType,callback:function(t){e.$set(l,"workType",t)},expression:"teamTypes.workType"}},["班组长"==l.tag?e._l(e.patternList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})})):[e._l(e.patternList,(function(t,s){return[s!=e.patternList.length-1?a("el-option",{key:t.value,attrs:{label:t.label,value:t.label}}):e._e()]}))]],2)],1)],1)]),a("div",{staticClass:"flex fbetween"},[a("div",{staticClass:"demand-service-plan-box-list-item-box flex fvertical"},[a("div",{staticClass:"plan-box-btn"}),a("el-form-item",{attrs:{label:"工种进场时间"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"请设置进场时间"},on:{change:function(t){return e.handleStartTime(s,i,n,l)}},model:{value:l.enterStartTime,callback:function(t){e.$set(l,"enterStartTime",t)},expression:"teamTypes.enterStartTime"}})],1)],1),a("div",{staticClass:"demand-service-plan-box-list-item-box"},[a("el-form-item",{attrs:{label:"工种工期"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"200px"},on:{input:function(t){return e.handleDuration(s,i,n,l)}},model:{value:l.enterDay,callback:function(t){e.$set(l,"enterDay",t)},expression:"teamTypes.enterDay"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("天")])],1)])],1),a("div",{staticClass:"demand-service-plan-box-list-item-box"},[a("el-form-item",{attrs:{label:"工种退场时间"}},[a("el-input",{attrs:{disabled:!0},model:{value:l.enterEndTime,callback:function(t){e.$set(l,"enterEndTime",t)},expression:"teamTypes.enterEndTime"}})],1)],1)]),e.type?a("div",{staticClass:"demand-service-plan-box-list-item-type flex"},[a("el-form-item",{attrs:{label:"个人工程量"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"200px"},model:{value:l.name,callback:function(t){e.$set(l,"name",t)},expression:"teamTypes.name"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v(e._s(e.geUnit(t.unit)))])],1)]),a("el-form-item",{attrs:{label:"计件单价"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"200px"},attrs:{disabled:!0},model:{value:l.name,callback:function(t){e.$set(l,"name",t)},expression:"teamTypes.name"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("元/"+e._s(e.geUnit(t.unit)))])],1)]),a("el-form-item",{attrs:{label:"人数"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"200px"},model:{value:l.name,callback:function(t){e.$set(l,"name",t)},expression:"teamTypes.name"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("人")])],1)])],1):e._e(),e.group?a("div",{staticClass:"demand-service-plan-box-list-item-group flex fbetween"},[a("el-form-item",{attrs:{label:"个人工程量"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"150px"},model:{value:l.name,callback:function(t){e.$set(l,"name",t)},expression:"teamTypes.name"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v(e._s(e.geUnit(t.unit)))])],1)]),a("el-form-item",{attrs:{label:"计件单价"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"150px"},attrs:{disabled:!0},model:{value:l.name,callback:function(t){e.$set(l,"name",t)},expression:"teamTypes.name"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("元/"+e._s(e.geUnit(t.unit)))])],1)]),a("el-form-item",{attrs:{label:"人数"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"150px"},model:{value:l.name,callback:function(t){e.$set(l,"name",t)},expression:"teamTypes.name"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("人")])],1)]),a("el-form-item",{attrs:{label:"带班管理费"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"150px"},model:{value:l.leaderFee,callback:function(t){e.$set(l,"leaderFee",t)},expression:"teamTypes.leaderFee"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("人")])],1)])],1):e._e(),a("div",{staticClass:"demand-service-plan-box-list-item-type flex"},[a("el-form-item",{attrs:{label:"每日工时"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"200px"},model:{value:l.workingHours,callback:function(t){e.$set(l,"workingHours",t)},expression:"teamTypes.workingHours"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v(e._s(e.geUnit(t.unit)))])],1)]),a("el-form-item",{attrs:{label:"工时单价"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"200px"},model:{value:l.unitPrice,callback:function(t){e.$set(l,"unitPrice",t)},expression:"teamTypes.unitPrice"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("元/"+e._s(e.geUnit(t.unit)))])],1)]),a("el-form-item",{attrs:{label:"每日收入"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"220px"},attrs:{disabled:!0},model:{value:l.income,callback:function(t){e.$set(l,"income",t)},expression:"teamTypes.income"}})],1)]),a("el-form-item",{attrs:{label:"人数"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"200px"},model:{value:l.number,callback:function(t){e.$set(l,"number",t)},expression:"teamTypes.number"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("人")])],1)]),a("el-form-item",{attrs:{label:"加班费"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"200px"},model:{value:l.overtimeFee,callback:function(t){e.$set(l,"overtimeFee",t)},expression:"teamTypes.overtimeFee"}}),a("span",{staticStyle:{"padding-left":"20px"}},[e._v("元/小时")])],1)]),a("el-form-item",{attrs:{label:"带班管理费"}},[a("div",{staticClass:"flex"},[a("el-input",{staticStyle:{width:"150px"},model:{value:l.leaderFee,callback:function(t){e.$set(l,"leaderFee",t)},expression:"teamTypes.leaderFee"}})],1)])],1),a("div",{staticClass:"demand-service-plan-box-list-item-text"},[a("el-form-item",{attrs:{label:"工作描述"}},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入",autosize:{minRows:2,maxRows:4}},model:{value:l.description,callback:function(t){e.$set(l,"description",t)},expression:"teamTypes.description"}})],1)],1)])],1)})),e._m(4,!0)],2)])})),a("div",{staticClass:"demand-service-plan-add-main flex fcenter"},[e._v("添加班组")]),a("div",{staticClass:"demand-service-plan-box-foot flex fcenter "},[a("div",{staticClass:"demand-service-plan-box-foot-item flex fvertical"},[a("span",[e._v(" 施工服务费")]),a("el-input",{staticClass:"f1",attrs:{placeholder:"",disabled:!0}})],1),a("div",{staticClass:"demand-service-plan-box-foot-item flex fvertical"},[a("span",[e._v(" 信息服务费")]),a("div",{staticClass:"flex"},[a("el-input",{staticClass:"f1",attrs:{placeholder:"请输入信息服务费比例"},model:{value:e.serviceFeeRate,callback:function(t){e.serviceFeeRate=t},expression:"serviceFeeRate"}}),a("el-input",{staticClass:"f1 demand-service-plan-box-foot-item-company",attrs:{value:"%",disabled:!0}}),a("el-input",{staticClass:"f1 demand-service-plan-box-foot-item-company",attrs:{value:e.serviceFeeRateNum,disabled:!0}})],1)]),a("div",{staticClass:"demand-service-plan-box-foot-item flex fvertical"},[a("span",[e._v(" 税费")]),a("div",{staticClass:"flex"},[a("el-input",{staticClass:"f1",attrs:{placeholder:"请输入信息服务费比例"},model:{value:e.taxRate,callback:function(t){e.taxRate=t},expression:"taxRate"}}),a("el-input",{staticClass:"f1 demand-service-plan-box-foot-item-company",attrs:{value:"%",disabled:!0}}),a("el-input",{staticClass:"f1 demand-service-plan-box-foot-item-company",attrs:{value:e.taxRateNum,disabled:!0}})],1)]),a("div",{staticClass:"demand-service-plan-box-foot-item flex fvertical"},[a("span",[e._v(" 总费用")]),a("el-input",{staticClass:"f1",attrs:{disabled:!0,placeholder:"元"},model:{value:e.totalFee,callback:function(t){e.totalFee=t},expression:"totalFee"}})],1)]),a("div",{staticClass:"demand-service-plan-box-foot-server-order flex fvertical fcenter ",on:{click:e.handleAddSerice}},[e._v("提交服务单")])],2)}))],2)])]),a("el-dialog",{attrs:{title:"提示",visible:e.isAddress,width:"800px","before-close":e.handleClose},on:{"update:visible":function(t){e.isAddress=t}}},[a("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"popper-class":"autoAddressClass","fetch-suggestions":e.querySearchAsync,"trigger-on-focus":!1,placeholder:"详细地址",clearable:""},on:{select:e.handleSelect},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.item;return[a("i",{staticClass:"el-icon-search fl mgr10"}),a("div",{staticStyle:{overflow:"hidden"}},[a("div",{staticClass:"title"},[e._v(e._s(s.title))]),a("span",{staticClass:"address ellipsis"},[e._v(e._s(s.address))])])]}}]),model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}}),a("div",{staticStyle:{width:"100%",height:"500px","margin-top":"20px"},attrs:{id:"map-container"}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.isAddress=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleAddress}},[e._v("确 定")])],1)],1)],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"demand-deltails-box-item flex"},[a("div",{staticClass:"demand-deltails-box-item-title"},[e._v("状态")]),a("div",{staticClass:"demand-deltails-box-item-conter"},[e._v("正常")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"demand-deltails-box-item flex"},[a("div",{staticClass:"demand-deltails-box-item-title"},[e._v("姓名")]),a("div",{staticClass:"demand-deltails-box-item-conter"},[e._v("张三")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"demand-deltails-box-item flex"},[a("div",{staticClass:"demand-deltails-box-item-title"},[e._v("联系方式")]),a("div",{staticClass:"demand-deltails-box-item-conter"},[e._v("18888888888")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"demand-deltails-box-item flex"},[a("div",{staticClass:"demand-deltails-box-item-title"},[e._v("文字")]),a("div",{staticClass:"demand-deltails-box-item-conter"},[e._v(" 需求内容... ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"demand-service-plan-box-list-btn flex fvertical fcenter"},[a("div",{staticClass:"demand-service-plan-box-list-btn-add"},[e._v("添加工种")]),a("div",{staticClass:"demand-service-plan-box-list-btn-del"},[e._v("删除班组")])])}],l=a("1da1");a("4de4"),a("d81d"),a("ac1f"),a("841c"),a("99af"),a("96cf"),a("d3b7");function n(e){return new Promise((function(t,a){if("undefined"!==typeof window.BMap)return t(window.BMap),!0;window.onBMapCallback=function(){t(window.BMap)};var s=document.createElement("script");s.type="text/javascript",s.src="http://api.map.baidu.com/api?v=3.0&ak="+e+"&callback=onBMapCallback",s.onerror=a,document.head.appendChild(s)}))}var r={data:function(){return{serviceFeeRate:"",serviceFeeRateNum:"元",taxRate:"",taxRateNum:"元",dialogImageUrl:"",isImges:!1,isAddress:!1,schemeList:[{name:"方案一",label:"1"}],scheme:"1",tabPosition:"right",ruleForm:{},rules:{},scopeList:[],distance:"",imageUrl:"",companyList:[{label:"㎡",value:1},{label:"m³",value:2},{label:"吨",value:3},{label:"kg",value:4},{label:"根",value:5},{label:"块",value:6},{label:"个",value:7}],company:"",options:[],value:"",form:{address:"",addrPoint:{lng:0,lat:0}},map:"",mk:"",allAddress:{},value1:"",addressMap:"",addressMk:"",basicForm:{title:"",startTime:"",endTime:"",duration:"",description:"",scope:"100",images:[]},totalFee:"元",schemes:[{tag:"",description:"",replaceTimes:"",totalUnit:"",teams:[{name:"",workTimeList:null,workStartTime:"",workEndTime:"",restTimeList:null,restStartTime:"",restEndTime:"",unitPrice:"",unit:"",enterStartTime:"",enterEndTime:"",enterDay:"",totalQuantity:"",teamTypes:[{name:"电工",tag:"",workType:"",enterStartTime:"",enterEndTime:"",enterDay:"",personalQuantity:"",unitPrice:"",number:"",leaderFee:"",description:"",overtimeFee:"",income:"",workingHours:""}]}]}],patternList:[{label:"计件",value:1},{label:"计时",value:2},{label:"管理",value:3}],tagList:[{label:"班组长",value:1},{label:"普通",value:2},{label:"小工",value:3}]}},watch:{isAddress:function(e){var t=this;e&&(this.form={},this.$nextTick((function(){t.initMap()})))}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e.$route.query.id,console.log(a),t.next=4,n("oMC0LUxpTjA22qOBPc2PmfKADwHeXhin");case 4:t.sent;case 5:case"end":return t.stop()}}),t)})))()},methods:{handleRestTime:function(e,t,a){console.log(a),this.schemes[e].teams[t].restStartTime=a.restTimeList[0],this.schemes[e].teams[t].restEndTime=a.restTimeList[1];var s=Date.parse(a.restTimeList[0]),i=Date.parse(a.restTimeList[1]);this.timeFn(s,i)},handleWorkTime:function(e,t,a){console.log(a),this.schemes[e].teams[t].workStartTime=a.workTimeList[0],this.schemes[e].teams[t].workEndTime=a.workTimeList[1];var s=Date.parse(a.workTimeList[0]),i=Date.parse(a.workTimeList[1]);this.timeFn(s,i)},timeFn:function(e,t){var a=new Date(e),s=new Date(t),i=s.getTime()-a.getTime(),l=(Math.floor(i/864e5),i%864e5),n=Math.floor(l/36e5),r=l%36e5,o=(Math.floor(r/6e4),r%6e4);Math.round(o/1e3);console.log(n)},handleTag:function(e,t,a,s){console.log(s),"班组长"==s.tag&&(s.workType="")},geUnit:function(e){if(e){var t=this.companyList.filter((function(t){return t.value==e}));return t[0].label}},bjDate:function(e,t){new Date(e),new Date(t);return e.getTime()-t.getTime()<0?t:e},handleStartTime:function(e,t,a,s){this.schemes[e].teams[t].enterStartTime=s.enterStartTime;var i=s.enterDay;if(s.enterStartTime&&i>=1){var l=this.dateChange(i,s.enterStartTime);console.log(l),s.enterEndTime=l}else s.enterEndTime=""},handleDuration:function(e,t,a,s){var i=s.enterDay;if(s.enterStartTime&&i>=1){var l=this.dateChange(i,s.enterStartTime);this.schemes[e].teams[t].enterStartTime=s.enterStartTime,this.schemes[e].teams[t].enterEndTime=l,s.enterEndTime=l}else this.schemes[e].teams[t].enterEndTime="",s.enterEndTime=""},dateChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||(t=new Date,t=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()),t+=" 00:00:00",t=Date.parse(new Date(t))/1e3,t+=86400*e;var a=new Date(1e3*parseInt(t)),s=a.getMonth()+1<10?"0"+(a.getMonth()+1):a.getMonth()+1,i=a.getDate()<10?"0"+a.getDate():a.getDate();return console.log(s),console.log(i),a.getFullYear()+"-"+s+"-"+i},handleAddSerice:function(){console.log(this.allAddress);var e={};e.address=this.allAddress.address?this.allAddress.address:this.allAddress.city+this.allAddress.title,e.city=this.allAddress.city,e.gpsLocation=this.allAddress.point.lng+","+this.allAddress.point.lat,e.province=this.allAddress.province,e.region=this.allAddress.region,e.serviceFeeRate=this.serviceFeeRate,e.taxRate=this.taxRate,console.log(this.allAddress)},handleAddress:function(){if(!this.form.addrPoint)return this.$message.error("请输入正确的地址");console.log();var e=this.form.addrPoint,t=this,a=new BMap.Geocoder;a.getLocation(e,(function(e){t.allAddress.region=e.addressComponents.district})),this.allAddress=this.form.allAddress,this.isAddress=!1,this.getDetailsAdderss(this.form)},handleClose:function(){this.isAddress=!1},getDetailsAdderss:function(e){var t=this;this.$nextTick((function(){var a=e.addrPoint,s=a.lng,i=a.lat;t.addressMap=new BMap.Map("DetailsAddress",{enableMapClick:!1});var l=new BMap.Point(s,i);t.addressMap.centerAndZoom(l,19);var n={width:120,height:100,title:"地址"},r=new BMap.InfoWindow(e.address,n);t.addressMap.openInfoWindow(r,e.addrPoint),t.addressMk=new BMap.Marker(l,{enableDragging:!1}),t.addressMap.addOverlay(t.addressMk)}))},initMap:function(){var e=this,t=this;this.$nextTick((function(){e.map=new BMap.Map("map-container",{enableMapClick:!1});var a=new BMap.Point(113.45229348086244,23.166207444960165);e.map.centerAndZoom(a,19),e.mk=new BMap.Marker(a,{enableDragging:!0});var s=new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_RIGHT,type:BMAP_NAVIGATION_CONTROL_SMALL});e.map.addControl(s);var i=new BMap.GeolocationControl({anchor:BMAP_ANCHOR_BOTTOM_LEFT});i.addEventListener("locationSuccess",(function(e){})),i.addEventListener("locationError",(function(e){alert(e.message)})),e.map.addControl(i),e.geolocation(),e.map.addEventListener("click",(function(e){t.getAddrByPoint(e.point)}))}))},querySearchAsync:function(e,t){var a={onSearchComplete:function(e){var a=[];if(s.getStatus()==BMAP_STATUS_SUCCESS){for(var i=0;i<e.getCurrentNumPois();i++)a.push(e.getPoi(i));t(a)}else t(a)}},s=new BMap.LocalSearch(this.map,a);s.search(e)},handleSelect:function(e){var t={width:120,height:50,title:e.title},a=new BMap.InfoWindow(e.address?e.address:e.city+e.title,t);console.log(e),this.form.address=e.address?e.address:e.city+e.title,this.form.addrPoint=e.point,this.form.allAddress=e,this.map.clearOverlays(),this.mk=new BMap.Marker(e.point),this.map.addOverlay(this.mk),this.map.panTo(e.point),this.map.openInfoWindow(a,e.point)},getAddrByPoint:function(e){var t=this,a=new BMap.Geocoder;a.getLocation(e,(function(a){t.mk.setPosition(e),t.map.panTo(e),t.form.address=a.address,t.form.addrPoint=e}))},geolocation:function(){var e=this,t=new BMap.Geolocation;t.getCurrentPosition((function(t){this.getStatus()==BMAP_STATUS_SUCCESS&&e.getAddrByPoint(t.point)}),{enableHighAccuracy:!0})},handleAddPlan:function(){var e=this.schemeList.length;if(3!=e){var t=["零","一","二","三","四","五","六","七","八","九"];this.schemeList.push({name:"方案"+t[e+1],label:e+1})}},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type,a=e.size/1024/1024<10;return t||this.$message.error("上传头像图片只能是 jpg或者png 格式!"),a||this.$message.error("上传头像图片大小不能超过 10MB!"),t&&a},handleExceed:function(e,t){this.$message.warning("当前限制选择 4 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handlePictureCardPreview:function(e){this.dialogImageUrl=e.response.data,this.isImges=!0},handleRemoveImg:function(e,t){this.basicForm=t.map((function(e){return e.response.data}))},handleSuccessImg:function(e,t,a){var s=[];s.push(t.response.data),this.basicForm.images=s}}},o=r,d=(a("2b59"),a("2877")),c=Object(d["a"])(o,s,i,!1,null,null,null);t["default"]=c.exports},"2b59":function(e,t,a){"use strict";a("9459")},9459:function(e,t,a){}}]);